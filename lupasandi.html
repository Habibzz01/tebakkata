<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lupa Password - Game Tebak Kata</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="dbs.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <nav class="nav">
                <div class="logo">Game Tebak Kata</div>
                <div class="nav-links">
                    <a href="index.html">Beranda</a>
                    <a href="login.html">Login</a>
                    <a href="daftar.html">Daftar</a>
                    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™</button>
                </div>
            </nav>
        </div>

        <div class="card animate-fadeIn" style="max-width: 400px; margin: 2rem auto;">
            <h2 style="text-align: center; margin-bottom: 2rem; color: var(--primary-color);">Lupa Password</h2>
            
            <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                Masukkan email Anda dan kami akan mengirimkan link untuk reset password.
            </p>
            
            <form id="resetPasswordForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="email" required>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">Kirim Link Reset</button>
            </form>
            
            <div style="text-align: center; margin-top: 1rem;">
                <p style="color: var(--text-secondary);">Ingat password? <a href="login.html" style="color: var(--primary-color);">Login di sini</a></p>
            </div>
        </div>
    </div>

    <script>
        // Theme Toggle
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.textContent = newTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        // Load saved theme
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.textContent = savedTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
        });

        // Reset password form submission
        document.getElementById('resetPasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            
            auth.sendPasswordResetEmail(email)
                .then(() => {
                    showToast('Link reset password telah dikirim ke email Anda!', 'success');
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 2000);
                })
                .catch((error) => {
                    showToast('Error: ' + error.message, 'error');
                });
        });

        // Toast notification function
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }
    </script>
</body>
</html>